# Dustin's wicked sway config

include ./variables.conf
include ./colors.conf

input * {
    repeat_delay 200
    repeat_rate 40
}

set $mod Mod4

set $left h
set $down j
set $up k
set $right l

# target                 title     bg    text   indicator  border
client.focused           $lavender $base $text  $rosewater $lavender
client.focused_inactive  $overlay0 $base $text  $rosewater $overlay0
client.unfocused         $overlay0 $base $text  $rosewater $overlay0
client.urgent            $peach    $base $peach $overlay0  $peach
client.placeholder       $overlay0 $base $text  $overlay0  $overlay0
client.background        $base

# xwayland enable

exec emacs --daemon
exec systemctl --user restart pipewire pipewire-pulse wireplumber
exec ~/.alatar/scripts/sync-flatpak-apps.sh

exec_always --no-startup-id systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK XDG_CURRENT_DESKTOP XDG_SESSION_TYPE
exec_always --no-startup-id dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK XDG_CURRENT_DESKTOP XDG_SESSION_TYPE
exec_always --no-startup-id systemctl --user restart xdg-desktop-portal-gtk.service xdg-desktop-portal.service
exec_always --no-startup-id /usr/libexec/polkit-gnome-authentication-agent-1
exec_always --no-startup-id sh -c 'export XDG_DATA_DIRS="$HOME/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:${XDG_DATA_DIRS:-/usr/local/share:/usr/share}"; dbus-update-activation-environment --systemd XDG_DATA_DIRS QT_QPA_PLATFORMTHEME=qt6ct'
exec_always --no-startup-id sh -c 'export XDG_DATA_DIRS="$HOME/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:${XDG_DATA_DIRS:-/usr/local/share:/usr/share}"; systemctl --user set-environment XDG_DATA_DIRS="$XDG_DATA_DIRS"'
exec_always --no-startup-id sh -c 'pkill -x waybar || true; waybar --config "$HOME/.alatar/alatar_dots/sway/waybar/config.jsonc" --style "$HOME/.alatar/alatar_dots/sway/waybar/style.css"'

include ./keybindings.conf

focus_on_window_activation  smart
default_orientation         auto
default_border              normal 4
default_floating_border     normal 4

output * bg $HOME/.config/wallpaper.png fill

gaps outer 0
gaps inner 12

floating_modifier $mod normal
for_window [app_id="swayimg"] border none
for_window [app_id="mpv"] floating enable, sticky enable
for_window [title=".* DEV .*"] floating enable
for_window [title="^nomicron$"] floating enable, border none
for_window [title="^Path Editor$"] floating enable
for_window [title="Alatar Help"] mark "Alatar Help", floating enable, resize set 1400 900, move position center
for_window [app_id="floating-terminal" title="Floating Terminal"] floating enable
for_window [app_id="com.mitchellh.ghostty" title="Floating Terminal"] floating enable
for_window [app_id="app.floating-yazi"] floating enable
for_window [app_id="korganizer"] floating enable
for_window [class="Korganizer"] floating enable
for_window [app_id="nm-connection-editor"] floating enable
for_window [class="Nm-connection-editor"] floating enable
for_window [app_id="pavucontrol"] floating enable
for_window [class="Pavucontrol"] floating enable
for_window [app_id="org.qutebrowser.qutebrowser"] floating enable
for_window [app_id="^(code|code-oss|VSCodium)$"] opacity 0.95
for_window [class="^(Code|code-oss|VSCodium)$"] opacity 0.95
for_window [app_id="cheatsheet-term" title="Keybindings Cheatsheet"] \
	   mark cheatsheet-term, floating enable, resize set 1400 900, move position center
for_window [title="Keybindings Cheatsheet"] floating enable
for_window [app_id="com.mitchellh.ghostty" title="floating-term"] \
	   mark floating-term, floating enable, resize set 1400 900, move position center
for_window [app_id="swayimg"] floating enable, border none, resize set 1600 900, move position center
